{"remainingRequest":"/Users/haris/Development/counting/client/node_modules/babel-loader/lib/index.js!/Users/haris/Development/counting/client/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/haris/Development/counting/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/haris/Development/counting/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haris/Development/counting/client/src/pages/LiveStream.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haris/Development/counting/client/src/pages/LiveStream.vue","mtime":1575257715327},{"path":"/Users/haris/Development/counting/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haris/Development/counting/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/haris/Development/counting/client/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/haris/Development/counting/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haris/Development/counting/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0IFZ1ZUxvYWRJbWFnZSBmcm9tICd2dWUtbG9hZC1pbWFnZScKZXhwb3J0IGRlZmF1bHQgewogIC8vIGNvbXBvbmVudHM6IHsKICAvLyAgICd2dWUtbG9hZC1pbWFnZSc6IFZ1ZUxvYWRJbWFnZQogIC8vIH0sCiAgcHJvcHM6IHsKICAgIHNvdXJjZTogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FtZXJhczogW10sCiAgICAgIGltYWdlRGVmYXVsdDogJy9zdG9yYWdlL2RlZmF1bHQvbG9hZGluZy5naWYnLAogICAgICBpbWFnZUVycm9yOiAnL3N0b3JhZ2UvZGVmYXVsdC9pbWFnZS00MDQucG5nJywKICAgICAgdmlkZW86ICcnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdGlhbGl6ZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBfc2VsZiwgX3JlZiwgZGF0YTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gaW5pdGlhbGl6ZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3NlbGYgPSB0aGlzOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAodGhpcy5heGlvcy5nZXQoJ2h0dHA6Ly8xMjcuMC4wLjE6ODAwMS9jYW1lcmEnKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX3JlZiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgICAgICAgICB0aGlzLmNhbWVyYXMgPSBkYXRhOwogICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaSkgewogICAgICAgICAgICAgICAgX3RoaXMuYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OicgKyBlbGVtZW50LnBvcnQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfc2VsZi5jYW1lcmFzW2ldLnN0YXR1cyA9IDE7CiAgICAgICAgICAgICAgICAgIHZhciByYW5kb20gPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTsKICAgICAgICAgICAgICAgICAgX3NlbGYuY2FtZXJhc1tpXS5zdHJlYW0gPSAnaHR0cDovL2xvY2FsaG9zdDonICsgZWxlbWVudC5wb3J0ICsgJy8nICsgcmFuZG9tICsgJy9zdHJlYW0ubWpwZyc7CiAgICAgICAgICAgICAgICAgIF9zZWxmLmNhbWVyYXNbaV0uc3RyZWFtU3RhdHVzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gbmV0d29yayBlcnJvcgogICAgICAgICAgICAgICAgICAgIF9zZWxmLmNhbWVyYXNbaV0uc3RhdHVzID0gMDsKICAgICAgICAgICAgICAgICAgICBfc2VsZi5jYW1lcmFzW2ldLnN0cmVhbVN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIGh0dHAgc3RhdHVzIGNvZGUKICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGVycm9yLnJlc3BvbnNlLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coY29kZSk7IC8vIHJlc3BvbnNlIGRhdGEKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgbnVsbCwgdGhpcyk7CiAgICB9LAogICAgdmlkZW9TdHJlYW06IGZ1bmN0aW9uIHZpZGVvU3RyZWFtKHBvcnQpIHsKICAgICAgdmFyIHJhbmRvbSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpOwogICAgICByZXR1cm4gImh0dHA6Ly8xMjcuMC4wLjE6IiArIHBvcnQgKyAiLyIgKyByYW5kb20gKyAiL3N0cmVhbS5tanBnIjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["LiveStream.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA,eAAA;AACA;AACA;AACA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAJA;AAOA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA,8BAFA;AAGA,MAAA,UAAA,EAAA,gCAHA;AAIA,MAAA,KAAA,EAAA;AAJA,KAAA;AAAA,GAPA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,UAAA;AACA,GAhBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEA,cAAA,KAFA,GAEA,IAFA;AAAA;AAAA,8CAGA,KAAA,KAAA,CAAA,GAAA,CAAA,8BAAA,CAHA;;AAAA;AAAA;AAGA,cAAA,IAHA,QAGA,IAHA;AAIA,mBAAA,OAAA,GAAA,IAAA;AAEA,cAAA,IAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA,CAAA,EAAA;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,sBAAA,OAAA,CAAA,IAAA,EAAA,IAAA,CAAA,YAAA;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,CAAA,EAAA,MAAA,GAAA,CAAA;AACA,sBAAA,MAAA,GAAA,IAAA,CAAA,MAAA,GAAA,QAAA,CAAA,EAAA,EAAA,SAAA,CAAA,CAAA,EAAA,EAAA,IAAA,IAAA,CAAA,MAAA,GAAA,QAAA,CAAA,EAAA,EAAA,SAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,CAAA,EAAA,MAAA,GAAA,sBAAA,OAAA,CAAA,IAAA,GAAA,GAAA,GAAA,MAAA,GAAA,cAAA;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,CAAA,EAAA,YAAA,GAAA,IAAA;AACA,iBALA,EAKA,KALA,CAKA,UAAA,KAAA,EAAA;AACA,sBAAA,CAAA,KAAA,CAAA,QAAA,EAAA;AACA;AACA,oBAAA,KAAA,CAAA,OAAA,CAAA,CAAA,EAAA,MAAA,GAAA,CAAA;AACA,oBAAA,KAAA,CAAA,OAAA,CAAA,CAAA,EAAA,YAAA,GAAA,KAAA;AACA,mBAJA,MAIA;AACA;AACA,wBAAA,IAAA,GAAA,KAAA,CAAA,QAAA,CAAA,MAAA;AACA,oBAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EAHA,CAIA;;AACA,wBAAA,QAAA,GAAA,KAAA,CAAA,QAAA,CAAA,IAAA;AACA,oBAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA;AACA,iBAlBA;AAmBA,eApBA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA6BA,IAAA,WA7BA,uBA6BA,IA7BA,EA6BA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,MAAA,GAAA,QAAA,CAAA,EAAA,EAAA,SAAA,CAAA,CAAA,EAAA,EAAA,IAAA,IAAA,CAAA,MAAA,GAAA,QAAA,CAAA,EAAA,EAAA,SAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACA,aAAA,sBAAA,IAAA,GAAA,GAAA,GAAA,MAAA,GAAA,cAAA;AACA;AAhCA;AAlBA,CAAA","sourcesContent":["<template>\n    <v-container fluid grid-list-md>\n      <v-layout wrap>\n        <v-flex d-flex xs12 sm6 md3 v-for=\"item of cameras\" :key=\"item.id_cctv\">\n          <v-card class=\"mx-auto\" width=\"300\">\n            <div v-if=\"item.streamStatus\">\n              <v-img :src=\"item.stream\"/>\n            </div>\n            <div v-else>\n              <v-img src=\"@/assets/offline.jpg\"/>\n            </div>\n            <v-img slot=\"error\" src=\"@/assets/offline.jpg\" aspect-ratio=\"1.7\"/>\n            <!-- <vue-load-image>\n              <img slot=\"image\" :src=\"'http://localhost:'+item.port+'/stream.mjpg'\" style=\"max-width:276px;\"/>\n              <img slot=\"preloader\" src=\"@/assets/loading.gif\"/>\n            </vue-load-image> -->\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                    <v-btn :to=\"'/live/'+item.id\">\n                      {{ item.name + ' ' }}\n                      <div v-if=\"item.status == 1\">\n                        <v-icon class=\"pl-2\" color=\"green\" left >mdi-brightness-1</v-icon>\n                      </div>\n                      <div v-else>\n                        <v-icon class=\"pl-2\" color=\"red\" left >mdi-brightness-1</v-icon>\n                      </div>\n                    </v-btn>\n                <v-spacer></v-spacer>\n              </v-card-actions>\n          </v-card>\n        </v-flex>\n      </v-layout>\n    </v-container>\n\n</template>\n\n<script>\n// import VueLoadImage from 'vue-load-image'\n  export default {\n    // components: {\n    //   'vue-load-image': VueLoadImage\n    // },\n    props: {\n      source: String,\n    },\n    data: () => ({\n      cameras:[],\n      imageDefault: '/storage/default/loading.gif',\n      imageError: '/storage/default/image-404.png',\n      video: ''\n    }),\n\n    created () {\n      this.initialize()\n    },\n\n    methods: {\n      async initialize () {\n        let _self = this\n        const { data } = await this.axios.get('http://127.0.0.1:8001/camera')\n        this.cameras = data\n\n        data.forEach((element, i) => {\n          this.axios.get('http://localhost:' + element.port).then(function(){\n            _self.cameras[i].status = 1\n            let random = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\n            _self.cameras[i].stream = 'http://localhost:' + element.port + '/' + random + '/stream.mjpg'\n            _self.cameras[i].streamStatus = true\n          }).catch(function(error){\n              if (!error.response) {\n                // network error\n                _self.cameras[i].status = 0\n                _self.cameras[i].streamStatus = false\n              } else {\n                // http status code\n                const code = error.response.status\n                window.console.log(code)\n                // response data\n                const response = error.response.data\n                window.console.log(response)\n              }\n          });\n        });\n      },\n\n      videoStream(port){\n          let random = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\n          return \"http://127.0.0.1:\" + port + \"/\" + random + \"/stream.mjpg\"\n      },\n    },\n  }\n</script>\n"],"sourceRoot":"src/pages"}]}