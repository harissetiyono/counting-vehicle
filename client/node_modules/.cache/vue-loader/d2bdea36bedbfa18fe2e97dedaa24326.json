{"remainingRequest":"/Users/haris/Development/counting/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haris/Development/counting/client/src/pages/LiveStream.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haris/Development/counting/client/src/pages/LiveStream.vue","mtime":1576650221438},{"path":"/Users/haris/Development/counting/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haris/Development/counting/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/haris/Development/counting/client/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/haris/Development/counting/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haris/Development/counting/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWVMb2FkSW1hZ2UgZnJvbSAndnVlLWxvYWQtaW1hZ2UnCiAgZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogewogICAgICAndnVlLWxvYWQtaW1hZ2UnOiBWdWVMb2FkSW1hZ2UKICAgIH0sCiAgICBwcm9wczogewogICAgICBzb3VyY2U6IFN0cmluZywKICAgIH0sCiAgICBkYXRhOiAoKSA9PiAoewogICAgICBjYW1lcmFzOltdLAogICAgICBpbWFnZURlZmF1bHQ6ICcvc3RvcmFnZS9kZWZhdWx0L2xvYWRpbmcuZ2lmJywKICAgICAgaW1hZ2VFcnJvcjogJy9zdG9yYWdlL2RlZmF1bHQvaW1hZ2UtNDA0LnBuZycsCiAgICAgIHZpZGVvOiAnJwogICAgfSksCgogICAgY3JlYXRlZCAoKSB7CiAgICAgIHRoaXMuJFByb2dyZXNzLnN0YXJ0KCkKICAgICAgdGhpcy5pbml0aWFsaXplKCkKICAgICAgdGhpcy4kUHJvZ3Jlc3MuZmluaXNoKCkKICAgIH0sCgogICAgbWV0aG9kczogewogICAgICBhc3luYyBpbml0aWFsaXplICgpIHsKICAgICAgICBsZXQgX3NlbGYgPSB0aGlzCiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCB0aGlzLmF4aW9zLmdldCgnaHR0cDovLzEyNy4wLjAuMTo4MDAxL2NhbWVyYScpCiAgICAgICAgdGhpcy5jYW1lcmFzID0gZGF0YQoKICAgICAgICBkYXRhLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHsKICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OicgKyBlbGVtZW50LnBvcnQpLnRoZW4oZnVuY3Rpb24oKXsKICAgICAgICAgICAgX3NlbGYuY2FtZXJhc1tpXS5zdGF0dXMgPSAxCiAgICAgICAgICAgIC8vIGxldCByYW5kb20gPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KQogICAgICAgICAgICAvLyBfc2VsZi5jYW1lcmFzW2ldLnN0cmVhbSA9ICdodHRwOi8vbG9jYWxob3N0OicgKyBlbGVtZW50LnBvcnQgKyAnLycgKyByYW5kb20gKyAnL3N0cmVhbS5tanBnJwogICAgICAgICAgICAvLyBfc2VsZi5jYW1lcmFzW2ldLnN0cmVhbVN0YXR1cyA9IHRydWUKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXsKICAgICAgICAgICAgICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIGVycm9yCiAgICAgICAgICAgICAgICBfc2VsZi5jYW1lcmFzW2ldLnN0YXR1cyA9IDAKICAgICAgICAgICAgICAgIF9zZWxmLmNhbWVyYXNbaV0uc3RyZWFtU3RhdHVzID0gZmFsc2UKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gaHR0cCBzdGF0dXMgY29kZQogICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IGVycm9yLnJlc3BvbnNlLnN0YXR1cwogICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKGNvZGUpCiAgICAgICAgICAgICAgICAvLyByZXNwb25zZSBkYXRhCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSwKCiAgICAgIHZpZGVvU3RyZWFtKHBvcnQpewogICAgICAgICAgbGV0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpCiAgICAgICAgICByZXR1cm4gImh0dHA6Ly8xMjcuMC4wLjE6IiArIHBvcnQgKyAiLyIgKyByYW5kb20gKyAiL3N0cmVhbS5tanBnIgogICAgICB9LAogICAgfSwKICB9Cg=="},{"version":3,"sources":["LiveStream.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"LiveStream.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <v-container fluid grid-list-md>\n      <v-layout wrap>\n        <v-flex d-flex xs12 sm6 md3 v-for=\"item of cameras\" :key=\"item.id_cctv\">\n          <v-card width=\"300\">\n            <!-- <div v-if=\"item.streamStatus\">\n              <v-img :src=\"videoStream(item.port)\"/>\n            </div>\n            <div v-else>\n              <v-img src=\"@/assets/offline.jpg\"/>\n            </div> -->\n            <!-- <v-img slot=\"error\" src=\"@/assets/offline.jpg\" aspect-ratio=\"1.7\"/> -->\n            <vue-load-image>\n              <img slot=\"image\" :src=\"'http://localhost:'+item.port+ '/' + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15) +'/stream.mjpg'\" style=\"width: 100%\"/>\n              <v-img slot=\"preloader\" src=\"@/assets/preloader.gif\"/>\n              <v-img slot=\"error\" src=\"@/assets/offline.jpg\" aspect-ratio=\"1.7\"/>\n            </vue-load-image>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                    <v-btn :to=\"'/live/'+item.id\">\n                      {{ item.name + ' ' }}\n                      <div v-if=\"item.status == 1\">\n                        <v-icon class=\"pl-2\" color=\"green\" left >mdi-brightness-1</v-icon>\n                      </div>\n                      <div v-else>\n                        <v-icon class=\"pl-2\" color=\"red\" left >mdi-brightness-1</v-icon>\n                      </div>\n                    </v-btn>\n                <v-spacer></v-spacer>\n              </v-card-actions>\n          </v-card>\n        </v-flex>\n      </v-layout>\n    </v-container>\n\n</template>\n\n<script>\nimport VueLoadImage from 'vue-load-image'\n  export default {\n    components: {\n      'vue-load-image': VueLoadImage\n    },\n    props: {\n      source: String,\n    },\n    data: () => ({\n      cameras:[],\n      imageDefault: '/storage/default/loading.gif',\n      imageError: '/storage/default/image-404.png',\n      video: ''\n    }),\n\n    created () {\n      this.$Progress.start()\n      this.initialize()\n      this.$Progress.finish()\n    },\n\n    methods: {\n      async initialize () {\n        let _self = this\n        const { data } = await this.axios.get('http://127.0.0.1:8001/camera')\n        this.cameras = data\n\n        data.forEach((element, i) => {\n          this.axios.get('http://localhost:' + element.port).then(function(){\n            _self.cameras[i].status = 1\n            // let random = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\n            // _self.cameras[i].stream = 'http://localhost:' + element.port + '/' + random + '/stream.mjpg'\n            // _self.cameras[i].streamStatus = true\n          }).catch(function(error){\n              if (!error.response) {\n                // network error\n                _self.cameras[i].status = 0\n                _self.cameras[i].streamStatus = false\n              } else {\n                // http status code\n                const code = error.response.status\n                window.console.log(code)\n                // response data\n                const response = error.response.data\n                window.console.log(response)\n              }\n          });\n        });\n      },\n\n      videoStream(port){\n          let random = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15)\n          return \"http://127.0.0.1:\" + port + \"/\" + random + \"/stream.mjpg\"\n      },\n    },\n  }\n</script>\n"]}]}